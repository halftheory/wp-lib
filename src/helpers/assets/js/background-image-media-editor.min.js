(function(c,e){wp.media.backgroundImage={get:function(){return wp.media.view.settings.post.backgroundImageId},set:function(a){var b=wp.media.view.settings;b.post.backgroundImageId=a;wp.media.post("get_post_background_image_html",{post_id:b.post.id,background_image_id:b.post.backgroundImageId,_wpnonce:b.post.nonce}).done(function(d){d==="0"?window.alert(wp.i18n.__("Could not set that as the background. Try a different attachment.")):c(".inside","#postbackgroundimagediv").html(d)})},remove:function(){wp.media.backgroundImage.set(-1)},
frame:function(){if(this._frame)return wp.media.frame=this._frame;this._frame=frame=wp.media({frame:"select",id:"background-image",title:"Background image",button:{text:"Set background image"},library:{type:["image"]},multiple:!1});this._frame.on("open",function(){var a=frame.state().get("selection");if(a.length===0){var b=wp.media.backgroundImage.get();b&&a.add(wp.media.attachment(b))}});this._frame.on("select",function(){var a=frame.state().get("selection").single();typeof a!=="undefined"&&wp.media.backgroundImage.set(a?
a.id:-1)});return this._frame},init:function(){c("#postbackgroundimagediv").on("click","#set-background-image",function(a){a.preventDefault();a.stopPropagation();wp.media.backgroundImage.frame().open()}).on("click","#remove-background-image",function(){wp.media.backgroundImage.remove();return!1})}};c(wp.media.backgroundImage.init)})(jQuery,_);
